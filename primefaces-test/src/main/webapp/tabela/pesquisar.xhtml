<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	
	<h:head>
		<title>PrimeFaces Test</title>
	</h:head>
	
	<h:body>
		<h:form id="formTabela">
			<p:messages severity="fatal,error" closable="true" id="messages" />
			<p:growl severity="info" id="info" />
			
			<p:panelGrid 
				columns="1" 
				layout="grid" 
				styleClass="ui-panelgrid-blank">
				
				<h:panelGroup>
					<p:spacer />
					<p:commandButton
						iconPos="rtl"
						process="@this"
						update="@form"
						icon="#{tabelaBean.bloqueioPrimeiraColuna.icon}"
						value="#{tabelaBean.bloqueioPrimeiraColuna.value}"
						actionListener="#{tabelaBean.definirBloquearPrimeiraColuna}"/>
				</h:panelGroup>
				
			</p:panelGrid>
			
			<p:separator />
			
			<p:dataTable 
				var="c" 
				id="tabela" 
				scrollable="true" 
				rowKey="#{index}" 
				scrollHeight="300" 
				scrollWidth="100%" 
				rowIndexVar="index" 
				selectionMode="single" 
				value="#{tabelaBean.contatos}" 
				selection="#{tabelaBean.contato}" 
				emptyMessage="Nenhum contato adicionado!" 
				frozenColumns="#{tabelaBean.bloqueioPrimeiraColuna.frozenColumns}" >
				
				<p:column headerText="Nome">
					<f:facet name="header">
						<div style="display:grid;grid-template-columns:1fr auto;align-items:center">
							<h:outputText value="Nome" />
							
							<p:commandLink
								process="@this"
								update=":formTabela:grupoInformacao"
								onclick="PF('dlgInformacao').show('#{component.clientId}')">
								
								<h:outputText styleClass="ui-icon ui-icon-info" style="justify-self:end" />
							</p:commandLink>
						</div>
					</f:facet>
					
					<h:outputText value="#{c['nome']}" title="#{c['nome']}" />
				</p:column>
				
				<p:column headerText="Chave" style="width:60px;text-align:center">
					<h:outputText value="#{c['chave']}" title="#{c['chave']}" />
				</p:column>
				
				<p:column headerText="Cidade">
					<h:outputText value="#{c['cidade']}" title="#{c['cidade']}" />
				</p:column>
				
			</p:dataTable>
			
			<p:overlayPanel
				my="right top"
				dynamic="true"
				at="right bottom"
				style="width:350px"
				widgetVar="dlgInformacao">
				
				<p:outputPanel id="grupoInformacao">
					<h:outputText value="Lorem ipsum dolor 0" style="display:block" />
					<h:outputText value="Lorem ipsum dolor 1" style="display:block" />
					<h:outputText value="Lorem ipsum dolor 2" style="display:block" />
				</p:outputPanel>
			</p:overlayPanel>
		</h:form>
	</h:body>
</html>	